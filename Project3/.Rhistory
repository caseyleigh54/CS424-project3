####views the order from largest to smallest, but does it change the data.frame?
library(dplyr)
#cook2[with(cook2, order(percentage))] %>% select (percentage)
cook2 <- cook2[with(cook2,order(-percentage)),]
#cook2 <- cook2 %>% slice (1:100)
#cook2[100:19,]
##cook2$Total <- cook2[,10]+cook2[,5]+cook2[,6]+cook2[,7]+cook2[,8]+cook2[9]
#mymap <- leaflet() %>% addTiles()  %>% setView(-96, 39, 4.3)
#mymap
library(leaflet)
# Get USA polygon data
USA <- getData("GADM", country = "usa", level = 2)
# Prepare data
mydata <- data.frame(state = c("Iowa", "Alabama", "Alabama" ),
county = c("Adair", "Monroe" ),
value = c(20, 100),
stringsAsFactors = FALSE)
# I do not know how your actual data is like. In this demonstration,
# I have data points for Adair in Iowa and Oklahoma. So
temp <- merge(USA, mydata,
by.x = c("NAME_1", "NAME_2"), by.y = c("state", "county"),
all.x = TRUE, all.y = TRUE)
# # Create a color palette
# mypal <- colorNumeric(palette = "inferno", domain = temp$value, na.color = "white")
#
# mymap <- leaflet() %>%
#   addProviderTiles("OpenStreetMap.Mapnik") %>%
#   setView(lat = 39.8283, lng = -98.5795, zoom = 4) %>%
#   addPolygons(data = USA, stroke = FALSE, smoothFactor = 0.2, fillOpacity = 0.4,
#               fillColor = ~mypal(temp$value),
#               popup = paste("Region: ", temp$NAME_2, "<br>",
#                             "Value: ", temp$value, "<br>")) %>%
#   addLegend(position = "bottomleft", pal = mypal, values = temp$value,
#             title = "Value",
#             opacity = 1)
#
# mymap
library(raster)
library(leaflet)
library(viridis)
# Get USA polygon data
USA <- getData("GADM", country = "usa", level = 2)
# Prepare data
mydata <- data.frame(state = c("Iowa", "Oklahoma"),
county = "Adair",
value = c(20, 100),
stringsAsFactors = FALSE)
# I do not know how your actual data is like. In this demonstration,
# I have data points for Adair in Iowa and Oklahoma. So
temp <- merge(USA, mydata,
by.x = c("NAME_1", "NAME_2"), by.y = c("state", "county"),
all.x = TRUE)
# Create a color palette
mypal <- colorNumeric(palette = "viridis", domain = temp$value, na.color = "grey")
map <- leaflet() %>%
addProviderTiles("OpenStreetMap.Mapnik") %>%
setView(lat = 39.8283, lng = -98.5795, zoom = 4) %>%
addPolygons(data = USA, stroke = FALSE, smoothFactor = 0.2, fillOpacity = 0.3,
fillColor = ~mypal(temp$value),
popup = paste("Region: ", temp$NAME_2, "<br>",
"Value: ", temp$value, "<br>")) %>%
addLegend(position = "bottomleft", pal = mypal, values = temp$value,
title = "Value",
opacity = 1)
map
View(temp)
View(mydata)
View(mydata)
library(shiny)
library(shinydashboard)
library(ggplot2)
library(lubridate)
library(DT)
library(jpeg)
library(grid)
library(leaflet)
library(scales)
library(reshape) #and melt function from https://www.statmethods.net/management/reshape.html
library(tidyr)
library(readr) #provided by import button for file
library(rsconnect)
library(data.table)
aqi_1980 <- read.table(file= "annual/annual_aqi_by_county_1980.csv",sep = ",", header= TRUE)
aqi_1981 <- read.table(file= "annual/annual_aqi_by_county_1981.csv",sep = ",", header= TRUE)
aqi_1982 <- read.table(file= "annual/annual_aqi_by_county_1982.csv",sep = ",", header= TRUE)
aqi_1983 <- read.table(file= "annual/annual_aqi_by_county_1983.csv",sep = ",", header= TRUE)
aqi_1984 <- read.table(file= "annual/annual_aqi_by_county_1984.csv",sep = ",", header= TRUE)
aqi_1985 <- read.table(file= "annual/annual_aqi_by_county_1985.csv",sep = ",", header= TRUE)
aqi_1986 <- read.table(file= "annual/annual_aqi_by_county_1986.csv",sep = ",", header= TRUE)
aqi_1987 <- read.table(file= "annual/annual_aqi_by_county_1987.csv",sep = ",", header= TRUE)
aqi_1988 <- read.table(file= "annual/annual_aqi_by_county_1988.csv",sep = ",", header= TRUE)
aqi_1989 <- read.table(file= "annual/annual_aqi_by_county_1989.csv",sep = ",", header= TRUE)
aqi_1990 <- read.table(file= "annual/annual_aqi_by_county_1990.csv",sep = ",", header= TRUE)
aqi_1991 <- read.table(file= "annual/annual_aqi_by_county_1991.csv",sep = ",", header= TRUE)
aqi_1992 <- read.table(file= "annual/annual_aqi_by_county_1992.csv",sep = ",", header= TRUE)
aqi_1993 <- read.table(file= "annual/annual_aqi_by_county_1993.csv",sep = ",", header= TRUE)
aqi_1994 <- read.table(file= "annual/annual_aqi_by_county_1994.csv",sep = ",", header= TRUE)
aqi_1995 <- read.table(file= "annual/annual_aqi_by_county_1995.csv",sep = ",", header= TRUE)
aqi_1996 <- read.table(file= "annual/annual_aqi_by_county_1996.csv",sep = ",", header= TRUE)
aqi_1997 <- read.table(file= "annual/annual_aqi_by_county_1997.csv",sep = ",", header= TRUE)
aqi_1998 <- read.table(file= "annual/annual_aqi_by_county_1998.csv",sep = ",", header= TRUE)
aqi_1999 <- read.table(file= "annual/annual_aqi_by_county_1999.csv",sep = ",", header= TRUE)
aqi_2000 <- read.table(file= "annual/annual_aqi_by_county_2000.csv",sep = ",", header= TRUE)
aqi_2001 <- read.table(file= "annual/annual_aqi_by_county_2001.csv",sep = ",", header= TRUE)
aqi_2002 <- read.table(file= "annual/annual_aqi_by_county_2002.csv",sep = ",", header= TRUE)
aqi_2003 <- read.table(file= "annual/annual_aqi_by_county_2003.csv",sep = ",", header= TRUE)
aqi_2004 <- read.table(file= "annual/annual_aqi_by_county_2004.csv",sep = ",", header= TRUE)
aqi_2005 <- read.table(file= "annual/annual_aqi_by_county_2005.csv",sep = ",", header= TRUE)
aqi_2006 <- read.table(file= "annual/annual_aqi_by_county_2006.csv",sep = ",", header= TRUE)
aqi_2007 <- read.table(file= "annual/annual_aqi_by_county_2007.csv",sep = ",", header= TRUE)
aqi_2008 <- read.table(file= "annual/annual_aqi_by_county_2008.csv",sep = ",", header= TRUE)
aqi_2009 <- read.table(file= "annual/annual_aqi_by_county_2009.csv",sep = ",", header= TRUE)
aqi_2010 <- read.table(file= "annual/annual_aqi_by_county_2010.csv",sep = ",", header= TRUE)
aqi_2011 <- read.table(file= "annual/annual_aqi_by_county_2011.csv",sep = ",", header= TRUE)
aqi_2012 <- read.table(file= "annual/annual_aqi_by_county_2012.csv",sep = ",", header= TRUE)
aqi_2013 <- read.table(file= "annual/annual_aqi_by_county_2013.csv",sep = ",", header= TRUE)
aqi_2014 <- read.table(file= "annual/annual_aqi_by_county_2014.csv",sep = ",", header= TRUE)
aqi_2015 <- read.table(file= "annual/annual_aqi_by_county_2015.csv",sep = ",", header= TRUE)
aqi_2016 <- read.table(file= "annual/annual_aqi_by_county_2016.csv",sep = ",", header= TRUE)
aqi_2017 <- read.table(file= "annual/annual_aqi_by_county_2017.csv",sep = ",", header= TRUE)
aqi_2018 <- read.table(file= "annual/annual_aqi_by_county_2018.csv",sep = ",", header= TRUE)
################## AQS FILE OF SITE LAT/LONG FOR MAPPING######################
latlong <- read.table(file= "sites/aqs_sites.csv",sep = ",", header = TRUE)
################################################################################ MERGE ALL AQI DATA INTO ONE TABLE WITH THE SAME COLUMNS AS IN EASH FILE ################################################################################
#adapted from prof code
allData <- rbind(aqi_1980,aqi_1981,aqi_1982,aqi_1983,aqi_1984,aqi_1985,aqi_1986,aqi_1987,aqi_1988,aqi_1989,aqi_1990,aqi_1991,aqi_1992,aqi_1993,aqi_1994,aqi_1995,aqi_1996,aqi_1997,aqi_1998,aqi_1999,aqi_2000,aqi_2001,aqi_2002,aqi_2003,aqi_2004,aqi_2005,aqi_2006,aqi_2007,aqi_2008,aqi_2009,aqi_2010,aqi_2011,aqi_2012,aqi_2013,aqi_2014,aqi_2015,aqi_2016,aqi_2017,aqi_2018)
years<-c(1980:2018)
Pollutant<-c("Ozone","SO2","CO","NO2","PM2.5","PM10","AQI")
cook <- subset(aqi_1980)
cook2<-  cook[1:19]
cook2$Total <- cook2[,14]+cook2[,15]+cook2[,16]+cook2[,17]
cook2$percentage <- (cook2[,16]/cook2[,20])*100
####views the order from largest to smallest, but does it change the data.frame?
library(dplyr)
#cook2[with(cook2, order(percentage))] %>% select (percentage)
cook2 <- cook2[with(cook2,order(-percentage)),]
#cook2 <- cook2 %>% slice (1:100)
#cook2[100:19,]
##cook2$Total <- cook2[,10]+cook2[,5]+cook2[,6]+cook2[,7]+cook2[,8]+cook2[9]
#mymap <- leaflet() %>% addTiles()  %>% setView(-96, 39, 4.3)
#mymap
library(leaflet)
# Get USA polygon data
USA <- getData("GADM", country = "usa", level = 2)
# Prepare data
mydata <- data.frame(state = c("Iowa", "Alabama", "Alabama" ),
county = c("Adair", "Monroe" ),
value = c(20, 100),
stringsAsFactors = FALSE)
# I do not know how your actual data is like. In this demonstration,
# I have data points for Adair in Iowa and Oklahoma. So
temp <- merge(USA, mydata,
by.x = c("NAME_1", "NAME_2"), by.y = c("state", "county"),
all.x = TRUE, all.y = TRUE)
# # Create a color palette
# mypal <- colorNumeric(palette = "inferno", domain = temp$value, na.color = "white")
#
# mymap <- leaflet() %>%
#   addProviderTiles("OpenStreetMap.Mapnik") %>%
#   setView(lat = 39.8283, lng = -98.5795, zoom = 4) %>%
#   addPolygons(data = USA, stroke = FALSE, smoothFactor = 0.2, fillOpacity = 0.4,
#               fillColor = ~mypal(temp$value),
#               popup = paste("Region: ", temp$NAME_2, "<br>",
#                             "Value: ", temp$value, "<br>")) %>%
#   addLegend(position = "bottomleft", pal = mypal, values = temp$value,
#             title = "Value",
#             opacity = 1)
#
# mymap
library(raster)
library(leaflet)
library(viridis)
# Get USA polygon data
USA <- getData("GADM", country = "usa", level = 2)
# Prepare data
mydata <- data.frame(state = c("Iowa", "Oklahoma"),
county = "Adair",
value = c(20, 100),
stringsAsFactors = FALSE)
# I do not know how your actual data is like. In this demonstration,
# I have data points for Adair in Iowa and Oklahoma. So
temp <- merge(USA, mydata,
by.x = c("NAME_1", "NAME_2"), by.y = c("state", "county"),
all.x = TRUE)
# Create a color palette
mypal <- colorNumeric(palette = "viridis", domain = temp$value, na.color = "grey")
map <- leaflet() %>%
addProviderTiles("OpenStreetMap.Mapnik") %>%
setView(lat = 39.8283, lng = -98.5795, zoom = 4) %>%
addPolygons(data = USA, stroke = FALSE, smoothFactor = 0.2, fillOpacity = 0.3,
fillColor = ~mypal(temp$value),
popup = paste("Region: ", temp$NAME_2, "<br>",
"Value: ", temp$value, "<br>")) %>%
addLegend(position = "bottomleft", pal = mypal, values = temp$value,
title = "Value",
opacity = 1)
map
cook <- subset(aqi_1980)
cook2<-  cook[1:19]
cook2$Total <- cook2[,14]+cook2[,15]+cook2[,16]+cook2[,17]
cook2$percentage <- (cook2[,16]/cook2[,20])*100
####views the order from largest to smallest, but does it change the data.frame?
library(dplyr)
#cook2[with(cook2, order(percentage))] %>% select (percentage)
cook2 <- cook2[with(cook2,order(-percentage)),]
#cook2 <- cook2 %>% slice (1:100)
cook <- subset(aqi_1980)
cook2<-  cook[1:19]
cook2$Total <- cook2[,14]+cook2[,15]+cook2[,16]+cook2[,17]
cook2$percentage <- (cook2[,16]/cook2[,20])*100
####views the order from largest to smallest, but does it change the data.frame?
library(dplyr)
#cook2[with(cook2, order(percentage))] %>% select (percentage)
cook2 <- cook2[with(cook2,order(-percentage)),]
#cook2 <- cook2 %>% slice (1:100)
library(shiny)
library(shinydashboard)
library(ggplot2)
library(lubridate)
library(DT)
library(jpeg)
library(grid)
library(leaflet)
library(scales)
library(reshape) #and melt function from https://www.statmethods.net/management/reshape.html
library(tidyr)
library(readr) #provided by import button for file
library(rsconnect)
library(data.table)
aqi_1980 <- read.table(file= "annual/annual_aqi_by_county_1980.csv",sep = ",", header= TRUE)
aqi_1981 <- read.table(file= "annual/annual_aqi_by_county_1981.csv",sep = ",", header= TRUE)
aqi_1982 <- read.table(file= "annual/annual_aqi_by_county_1982.csv",sep = ",", header= TRUE)
aqi_1983 <- read.table(file= "annual/annual_aqi_by_county_1983.csv",sep = ",", header= TRUE)
aqi_1984 <- read.table(file= "annual/annual_aqi_by_county_1984.csv",sep = ",", header= TRUE)
aqi_1985 <- read.table(file= "annual/annual_aqi_by_county_1985.csv",sep = ",", header= TRUE)
aqi_1986 <- read.table(file= "annual/annual_aqi_by_county_1986.csv",sep = ",", header= TRUE)
aqi_1987 <- read.table(file= "annual/annual_aqi_by_county_1987.csv",sep = ",", header= TRUE)
aqi_1988 <- read.table(file= "annual/annual_aqi_by_county_1988.csv",sep = ",", header= TRUE)
aqi_1989 <- read.table(file= "annual/annual_aqi_by_county_1989.csv",sep = ",", header= TRUE)
aqi_1990 <- read.table(file= "annual/annual_aqi_by_county_1990.csv",sep = ",", header= TRUE)
aqi_1991 <- read.table(file= "annual/annual_aqi_by_county_1991.csv",sep = ",", header= TRUE)
aqi_1992 <- read.table(file= "annual/annual_aqi_by_county_1992.csv",sep = ",", header= TRUE)
aqi_1993 <- read.table(file= "annual/annual_aqi_by_county_1993.csv",sep = ",", header= TRUE)
aqi_1994 <- read.table(file= "annual/annual_aqi_by_county_1994.csv",sep = ",", header= TRUE)
aqi_1995 <- read.table(file= "annual/annual_aqi_by_county_1995.csv",sep = ",", header= TRUE)
aqi_1996 <- read.table(file= "annual/annual_aqi_by_county_1996.csv",sep = ",", header= TRUE)
aqi_1997 <- read.table(file= "annual/annual_aqi_by_county_1997.csv",sep = ",", header= TRUE)
aqi_1998 <- read.table(file= "annual/annual_aqi_by_county_1998.csv",sep = ",", header= TRUE)
aqi_1999 <- read.table(file= "annual/annual_aqi_by_county_1999.csv",sep = ",", header= TRUE)
aqi_2000 <- read.table(file= "annual/annual_aqi_by_county_2000.csv",sep = ",", header= TRUE)
aqi_2001 <- read.table(file= "annual/annual_aqi_by_county_2001.csv",sep = ",", header= TRUE)
aqi_2002 <- read.table(file= "annual/annual_aqi_by_county_2002.csv",sep = ",", header= TRUE)
aqi_2003 <- read.table(file= "annual/annual_aqi_by_county_2003.csv",sep = ",", header= TRUE)
aqi_2004 <- read.table(file= "annual/annual_aqi_by_county_2004.csv",sep = ",", header= TRUE)
aqi_2005 <- read.table(file= "annual/annual_aqi_by_county_2005.csv",sep = ",", header= TRUE)
aqi_2006 <- read.table(file= "annual/annual_aqi_by_county_2006.csv",sep = ",", header= TRUE)
aqi_2007 <- read.table(file= "annual/annual_aqi_by_county_2007.csv",sep = ",", header= TRUE)
aqi_2008 <- read.table(file= "annual/annual_aqi_by_county_2008.csv",sep = ",", header= TRUE)
aqi_2009 <- read.table(file= "annual/annual_aqi_by_county_2009.csv",sep = ",", header= TRUE)
aqi_2010 <- read.table(file= "annual/annual_aqi_by_county_2010.csv",sep = ",", header= TRUE)
aqi_2011 <- read.table(file= "annual/annual_aqi_by_county_2011.csv",sep = ",", header= TRUE)
aqi_2012 <- read.table(file= "annual/annual_aqi_by_county_2012.csv",sep = ",", header= TRUE)
aqi_2013 <- read.table(file= "annual/annual_aqi_by_county_2013.csv",sep = ",", header= TRUE)
aqi_2014 <- read.table(file= "annual/annual_aqi_by_county_2014.csv",sep = ",", header= TRUE)
aqi_2015 <- read.table(file= "annual/annual_aqi_by_county_2015.csv",sep = ",", header= TRUE)
aqi_2016 <- read.table(file= "annual/annual_aqi_by_county_2016.csv",sep = ",", header= TRUE)
aqi_2017 <- read.table(file= "annual/annual_aqi_by_county_2017.csv",sep = ",", header= TRUE)
aqi_2018 <- read.table(file= "annual/annual_aqi_by_county_2018.csv",sep = ",", header= TRUE)
################## AQS FILE OF SITE LAT/LONG FOR MAPPING######################
latlong <- read.table(file= "sites/aqs_sites.csv",sep = ",", header = TRUE)
################################################################################ MERGE ALL AQI DATA INTO ONE TABLE WITH THE SAME COLUMNS AS IN EASH FILE ################################################################################
#adapted from prof code
allData <- rbind(aqi_1980,aqi_1981,aqi_1982,aqi_1983,aqi_1984,aqi_1985,aqi_1986,aqi_1987,aqi_1988,aqi_1989,aqi_1990,aqi_1991,aqi_1992,aqi_1993,aqi_1994,aqi_1995,aqi_1996,aqi_1997,aqi_1998,aqi_1999,aqi_2000,aqi_2001,aqi_2002,aqi_2003,aqi_2004,aqi_2005,aqi_2006,aqi_2007,aqi_2008,aqi_2009,aqi_2010,aqi_2011,aqi_2012,aqi_2013,aqi_2014,aqi_2015,aqi_2016,aqi_2017,aqi_2018)
years<-c(1980:2018)
Pollutant<-c("Ozone","SO2","CO","NO2","PM2.5","PM10","AQI")
cook <- subset(aqi_1980)
cook2<-  cook[1:19]
cook2$Total <- cook2[,14]+cook2[,15]+cook2[,16]+cook2[,17]
cook2$percentage <- (cook2[,16]/cook2[,20])*100
####views the order from largest to smallest, but does it change the data.frame?
library(dplyr)
#cook2[with(cook2, order(percentage))] %>% select (percentage)
cook2 <- cook2[with(cook2,order(-percentage)),]
#cook2 <- cook2 %>% slice (1:100)
#cook2[100:19,]
##cook2$Total <- cook2[,10]+cook2[,5]+cook2[,6]+cook2[,7]+cook2[,8]+cook2[9]
#mymap <- leaflet() %>% addTiles()  %>% setView(-96, 39, 4.3)
#mymap
library(leaflet)
# Get USA polygon data
USA <- getData("GADM", country = "usa", level = 2)
# Prepare data
mydata <- data.frame(state = c("Iowa", "Alabama", "Alabama" ),
county = c("Adair", "Monroe" ),
value = c(20, 100),
stringsAsFactors = FALSE)
# I do not know how your actual data is like. In this demonstration,
# I have data points for Adair in Iowa and Oklahoma. So
temp <- merge(USA, mydata,
by.x = c("NAME_1", "NAME_2"), by.y = c("state", "county"),
all.x = TRUE, all.y = TRUE)
# # Create a color palette
# mypal <- colorNumeric(palette = "inferno", domain = temp$value, na.color = "white")
#
# mymap <- leaflet() %>%
#   addProviderTiles("OpenStreetMap.Mapnik") %>%
#   setView(lat = 39.8283, lng = -98.5795, zoom = 4) %>%
#   addPolygons(data = USA, stroke = FALSE, smoothFactor = 0.2, fillOpacity = 0.4,
#               fillColor = ~mypal(temp$value),
#               popup = paste("Region: ", temp$NAME_2, "<br>",
#                             "Value: ", temp$value, "<br>")) %>%
#   addLegend(position = "bottomleft", pal = mypal, values = temp$value,
#             title = "Value",
#             opacity = 1)
#
# mymap
library(raster)
library(leaflet)
library(viridis)
# Get USA polygon data
USA <- getData("GADM", country = "usa", level = 2)
# Prepare data
mydata <- data.frame(state = c("Iowa", "Oklahoma"),
county = "Adair",
value = c(20, 100),
stringsAsFactors = FALSE)
# I do not know how your actual data is like. In this demonstration,
# I have data points for Adair in Iowa and Oklahoma. So
temp <- merge(USA, mydata,
by.x = c("NAME_1", "NAME_2"), by.y = c("state", "county"),
all.x = TRUE)
# Create a color palette
mypal <- colorNumeric(palette = "viridis", domain = temp$value, na.color = "grey")
map <- leaflet() %>%
addProviderTiles("OpenStreetMap.Mapnik") %>%
setView(lat = 39.8283, lng = -98.5795, zoom = 4) %>%
addPolygons(data = USA, stroke = FALSE, smoothFactor = 0.2, fillOpacity = 0.3,
fillColor = ~mypal(temp$value),
popup = paste("Region: ", temp$NAME_2, "<br>",
"Value: ", temp$value, "<br>")) %>%
addLegend(position = "bottomleft", pal = mypal, values = temp$value,
title = "Value",
opacity = 1)
map
library(shiny)
library(shinydashboard)
library(ggplot2)
library(lubridate)
library(DT)
library(jpeg)
library(grid)
library(leaflet)
library(scales)
library(reshape) #and melt function from https://www.statmethods.net/management/reshape.html
library(tidyr)
library(readr) #provided by import button for file
library(rsconnect)
library(data.table)
aqi_1980 <- read.table(file= "annual/annual_aqi_by_county_1980.csv",sep = ",", header= TRUE)
aqi_1981 <- read.table(file= "annual/annual_aqi_by_county_1981.csv",sep = ",", header= TRUE)
aqi_1982 <- read.table(file= "annual/annual_aqi_by_county_1982.csv",sep = ",", header= TRUE)
aqi_1983 <- read.table(file= "annual/annual_aqi_by_county_1983.csv",sep = ",", header= TRUE)
aqi_1984 <- read.table(file= "annual/annual_aqi_by_county_1984.csv",sep = ",", header= TRUE)
aqi_1985 <- read.table(file= "annual/annual_aqi_by_county_1985.csv",sep = ",", header= TRUE)
aqi_1986 <- read.table(file= "annual/annual_aqi_by_county_1986.csv",sep = ",", header= TRUE)
aqi_1987 <- read.table(file= "annual/annual_aqi_by_county_1987.csv",sep = ",", header= TRUE)
aqi_1988 <- read.table(file= "annual/annual_aqi_by_county_1988.csv",sep = ",", header= TRUE)
aqi_1989 <- read.table(file= "annual/annual_aqi_by_county_1989.csv",sep = ",", header= TRUE)
aqi_1990 <- read.table(file= "annual/annual_aqi_by_county_1990.csv",sep = ",", header= TRUE)
aqi_1991 <- read.table(file= "annual/annual_aqi_by_county_1991.csv",sep = ",", header= TRUE)
aqi_1992 <- read.table(file= "annual/annual_aqi_by_county_1992.csv",sep = ",", header= TRUE)
aqi_1993 <- read.table(file= "annual/annual_aqi_by_county_1993.csv",sep = ",", header= TRUE)
aqi_1994 <- read.table(file= "annual/annual_aqi_by_county_1994.csv",sep = ",", header= TRUE)
aqi_1995 <- read.table(file= "annual/annual_aqi_by_county_1995.csv",sep = ",", header= TRUE)
aqi_1996 <- read.table(file= "annual/annual_aqi_by_county_1996.csv",sep = ",", header= TRUE)
aqi_1997 <- read.table(file= "annual/annual_aqi_by_county_1997.csv",sep = ",", header= TRUE)
aqi_1998 <- read.table(file= "annual/annual_aqi_by_county_1998.csv",sep = ",", header= TRUE)
aqi_1999 <- read.table(file= "annual/annual_aqi_by_county_1999.csv",sep = ",", header= TRUE)
aqi_2000 <- read.table(file= "annual/annual_aqi_by_county_2000.csv",sep = ",", header= TRUE)
aqi_2001 <- read.table(file= "annual/annual_aqi_by_county_2001.csv",sep = ",", header= TRUE)
aqi_2002 <- read.table(file= "annual/annual_aqi_by_county_2002.csv",sep = ",", header= TRUE)
aqi_2003 <- read.table(file= "annual/annual_aqi_by_county_2003.csv",sep = ",", header= TRUE)
aqi_2004 <- read.table(file= "annual/annual_aqi_by_county_2004.csv",sep = ",", header= TRUE)
aqi_2005 <- read.table(file= "annual/annual_aqi_by_county_2005.csv",sep = ",", header= TRUE)
aqi_2006 <- read.table(file= "annual/annual_aqi_by_county_2006.csv",sep = ",", header= TRUE)
aqi_2007 <- read.table(file= "annual/annual_aqi_by_county_2007.csv",sep = ",", header= TRUE)
aqi_2008 <- read.table(file= "annual/annual_aqi_by_county_2008.csv",sep = ",", header= TRUE)
aqi_2009 <- read.table(file= "annual/annual_aqi_by_county_2009.csv",sep = ",", header= TRUE)
aqi_2010 <- read.table(file= "annual/annual_aqi_by_county_2010.csv",sep = ",", header= TRUE)
aqi_2011 <- read.table(file= "annual/annual_aqi_by_county_2011.csv",sep = ",", header= TRUE)
aqi_2012 <- read.table(file= "annual/annual_aqi_by_county_2012.csv",sep = ",", header= TRUE)
aqi_2013 <- read.table(file= "annual/annual_aqi_by_county_2013.csv",sep = ",", header= TRUE)
aqi_2014 <- read.table(file= "annual/annual_aqi_by_county_2014.csv",sep = ",", header= TRUE)
aqi_2015 <- read.table(file= "annual/annual_aqi_by_county_2015.csv",sep = ",", header= TRUE)
aqi_2016 <- read.table(file= "annual/annual_aqi_by_county_2016.csv",sep = ",", header= TRUE)
aqi_2017 <- read.table(file= "annual/annual_aqi_by_county_2017.csv",sep = ",", header= TRUE)
aqi_2018 <- read.table(file= "annual/annual_aqi_by_county_2018.csv",sep = ",", header= TRUE)
################## AQS FILE OF SITE LAT/LONG FOR MAPPING######################
latlong <- read.table(file= "sites/aqs_sites.csv",sep = ",", header = TRUE)
################################################################################ MERGE ALL AQI DATA INTO ONE TABLE WITH THE SAME COLUMNS AS IN EASH FILE ################################################################################
#adapted from prof code
allData <- rbind(aqi_1980,aqi_1981,aqi_1982,aqi_1983,aqi_1984,aqi_1985,aqi_1986,aqi_1987,aqi_1988,aqi_1989,aqi_1990,aqi_1991,aqi_1992,aqi_1993,aqi_1994,aqi_1995,aqi_1996,aqi_1997,aqi_1998,aqi_1999,aqi_2000,aqi_2001,aqi_2002,aqi_2003,aqi_2004,aqi_2005,aqi_2006,aqi_2007,aqi_2008,aqi_2009,aqi_2010,aqi_2011,aqi_2012,aqi_2013,aqi_2014,aqi_2015,aqi_2016,aqi_2017,aqi_2018)
years<-c(1980:2018)
Pollutant<-c("Ozone","SO2","CO","NO2","PM2.5","PM10","AQI")
cook <- subset(aqi_1980)
cook2<-  cook[1:19]
cook2$Total <- cook2[,14]+cook2[,15]+cook2[,16]+cook2[,17]
cook2$percentage <- (cook2[,16]/cook2[,20])*100
####views the order from largest to smallest, but does it change the data.frame?
library(dplyr)
#cook2[with(cook2, order(percentage))] %>% select (percentage)
cook2 <- cook2[with(cook2,order(-percentage)),]
#cook2 <- cook2 %>% slice (1:100)
#cook2[100:19,]
##cook2$Total <- cook2[,10]+cook2[,5]+cook2[,6]+cook2[,7]+cook2[,8]+cook2[9]
library(shiny)
library(shinydashboard)
library(ggplot2)
library(lubridate)
library(DT)
library(jpeg)
library(grid)
library(leaflet)
library(scales)
library(reshape) #and melt function from https://www.statmethods.net/management/reshape.html
library(tidyr)
library(readr) #provided by import button for file
library(rsconnect)
library(data.table)
aqi_1980 <- read.table(file= "annual/annual_aqi_by_county_1980.csv",sep = ",", header= TRUE)
aqi_1981 <- read.table(file= "annual/annual_aqi_by_county_1981.csv",sep = ",", header= TRUE)
aqi_1982 <- read.table(file= "annual/annual_aqi_by_county_1982.csv",sep = ",", header= TRUE)
aqi_1983 <- read.table(file= "annual/annual_aqi_by_county_1983.csv",sep = ",", header= TRUE)
aqi_1984 <- read.table(file= "annual/annual_aqi_by_county_1984.csv",sep = ",", header= TRUE)
aqi_1985 <- read.table(file= "annual/annual_aqi_by_county_1985.csv",sep = ",", header= TRUE)
aqi_1986 <- read.table(file= "annual/annual_aqi_by_county_1986.csv",sep = ",", header= TRUE)
aqi_1987 <- read.table(file= "annual/annual_aqi_by_county_1987.csv",sep = ",", header= TRUE)
aqi_1988 <- read.table(file= "annual/annual_aqi_by_county_1988.csv",sep = ",", header= TRUE)
aqi_1989 <- read.table(file= "annual/annual_aqi_by_county_1989.csv",sep = ",", header= TRUE)
aqi_1990 <- read.table(file= "annual/annual_aqi_by_county_1990.csv",sep = ",", header= TRUE)
aqi_1991 <- read.table(file= "annual/annual_aqi_by_county_1991.csv",sep = ",", header= TRUE)
aqi_1992 <- read.table(file= "annual/annual_aqi_by_county_1992.csv",sep = ",", header= TRUE)
aqi_1993 <- read.table(file= "annual/annual_aqi_by_county_1993.csv",sep = ",", header= TRUE)
aqi_1994 <- read.table(file= "annual/annual_aqi_by_county_1994.csv",sep = ",", header= TRUE)
aqi_1995 <- read.table(file= "annual/annual_aqi_by_county_1995.csv",sep = ",", header= TRUE)
aqi_1996 <- read.table(file= "annual/annual_aqi_by_county_1996.csv",sep = ",", header= TRUE)
aqi_1997 <- read.table(file= "annual/annual_aqi_by_county_1997.csv",sep = ",", header= TRUE)
aqi_1998 <- read.table(file= "annual/annual_aqi_by_county_1998.csv",sep = ",", header= TRUE)
aqi_1999 <- read.table(file= "annual/annual_aqi_by_county_1999.csv",sep = ",", header= TRUE)
aqi_2000 <- read.table(file= "annual/annual_aqi_by_county_2000.csv",sep = ",", header= TRUE)
aqi_2001 <- read.table(file= "annual/annual_aqi_by_county_2001.csv",sep = ",", header= TRUE)
aqi_2002 <- read.table(file= "annual/annual_aqi_by_county_2002.csv",sep = ",", header= TRUE)
aqi_2003 <- read.table(file= "annual/annual_aqi_by_county_2003.csv",sep = ",", header= TRUE)
aqi_2004 <- read.table(file= "annual/annual_aqi_by_county_2004.csv",sep = ",", header= TRUE)
aqi_2005 <- read.table(file= "annual/annual_aqi_by_county_2005.csv",sep = ",", header= TRUE)
aqi_2006 <- read.table(file= "annual/annual_aqi_by_county_2006.csv",sep = ",", header= TRUE)
aqi_2007 <- read.table(file= "annual/annual_aqi_by_county_2007.csv",sep = ",", header= TRUE)
aqi_2008 <- read.table(file= "annual/annual_aqi_by_county_2008.csv",sep = ",", header= TRUE)
aqi_2009 <- read.table(file= "annual/annual_aqi_by_county_2009.csv",sep = ",", header= TRUE)
aqi_2010 <- read.table(file= "annual/annual_aqi_by_county_2010.csv",sep = ",", header= TRUE)
aqi_2011 <- read.table(file= "annual/annual_aqi_by_county_2011.csv",sep = ",", header= TRUE)
aqi_2012 <- read.table(file= "annual/annual_aqi_by_county_2012.csv",sep = ",", header= TRUE)
aqi_2013 <- read.table(file= "annual/annual_aqi_by_county_2013.csv",sep = ",", header= TRUE)
aqi_2014 <- read.table(file= "annual/annual_aqi_by_county_2014.csv",sep = ",", header= TRUE)
aqi_2015 <- read.table(file= "annual/annual_aqi_by_county_2015.csv",sep = ",", header= TRUE)
aqi_2016 <- read.table(file= "annual/annual_aqi_by_county_2016.csv",sep = ",", header= TRUE)
aqi_2017 <- read.table(file= "annual/annual_aqi_by_county_2017.csv",sep = ",", header= TRUE)
aqi_2018 <- read.table(file= "annual/annual_aqi_by_county_2018.csv",sep = ",", header= TRUE)
################## AQS FILE OF SITE LAT/LONG FOR MAPPING######################
latlong <- read.table(file= "sites/aqs_sites.csv",sep = ",", header = TRUE)
################################################################################ MERGE ALL AQI DATA INTO ONE TABLE WITH THE SAME COLUMNS AS IN EASH FILE ################################################################################
#adapted from prof code
allData <- rbind(aqi_1980,aqi_1981,aqi_1982,aqi_1983,aqi_1984,aqi_1985,aqi_1986,aqi_1987,aqi_1988,aqi_1989,aqi_1990,aqi_1991,aqi_1992,aqi_1993,aqi_1994,aqi_1995,aqi_1996,aqi_1997,aqi_1998,aqi_1999,aqi_2000,aqi_2001,aqi_2002,aqi_2003,aqi_2004,aqi_2005,aqi_2006,aqi_2007,aqi_2008,aqi_2009,aqi_2010,aqi_2011,aqi_2012,aqi_2013,aqi_2014,aqi_2015,aqi_2016,aqi_2017,aqi_2018)
years<-c(1980:2018)
Pollutant<-c("Ozone","SO2","CO","NO2","PM2.5","PM10","AQI")
cook <- subset(aqi_1980)
cook2<-  cook[1:19]
cook2$Total <- cook2[,14]+cook2[,15]+cook2[,16]+cook2[,17]
cook2$percentage <- (cook2[,16]/cook2[,20])*100
####views the order from largest to smallest, but does it change the data.frame?
library(dplyr)
#cook2[with(cook2, order(percentage))] %>% select (percentage)
cook2 <- cook2[with(cook2,order(-percentage)),]
#cook2 <- cook2 %>% slice (1:100)
#cook2[100:19,]
##cook2$Total <- cook2[,10]+cook2[,5]+cook2[,6]+cook2[,7]+cook2[,8]+cook2[9]
ip = as.data.frame(installed.packages()[,c(1,3:4)])
ip = ip[is.na(ip$Priority),1:2,drop=FALSE]
ip
shiny::runApp('Desktop/CS424-project3/Project3')
install.packages(c("darksky", "qdapTools", "ropenaq", "tidyverse"))
runApp('Desktop/CS424-project3/Project3')
runApp('Desktop/CS424-project3/Project3')
runApp('Desktop/CS424-project3/Project3')
devtools::install_local("aot-client-r-master")
devtools::install_local("aot-client-r-master")
#export(ls.raw_observations)
devtools::install_local("aot-client-r-master")
shiny::runApp('Desktop/CS424-project3/Project3')
runApp('Desktop/CS424-project3/Project3')
install.packages("devtools")
devtools::install_local("aot-client-r-master")
library(AotClient)
shiny::runApp('CS424-project3/Project3')
runApp('CS424-project3/Project3')
runApp('CS424-project3/Project3')
shiny::runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
